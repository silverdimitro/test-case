<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>join | chatApp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript">
      $(function () {
     //var frm = $(document.myform);
     //var dat = JSON.stringify(frm.serializeArray());

       $('#myform').submit(function(e) {
         e.preventDefault();
         var dat = {
             email: $('#email').val(),
             password: $('#password').val()
         }
           $.ajax({
               datatype : "json",
               contentType: "application/json; charset=utf-8",
               type: "POST",
               url: '/adduser',
               data: JSON.stringify(dat),
               success: function() {console.log('success');},
               error: function() {},
           });
           // Stops browser refresh

           //
          //  var $this = $(this);
          //  $this.unbind('submit').submit();
           $("#myform").off('submit');
       });
       // Submit on document ready
 });
 $('#myform').submit();
  </script>
</head>
  <body class="centered-form">

<div class="centered-form__form">

  <form name="myform" id="myform" action="/adduser"  method="post">

  <div class="form-field"><h3>Enter your details</h3></div>
  <div class="form-field">
    <label>Email</label>
      <input type="text" name="email"  id="email" autofocus autocomplete="off"/>
        </div>
  <div class="form-field">
    <label>Password</label>
    <input type="password" name="password" id="password" />
    </div>
  <div class="form-field">
    <button type="submit" id="submitform" >Sign Up</button></div>

</form>
</div>
  <!-- <script>
$(document).ready(function(){
     $("#submitform").click(function(e)
     {
     var MyForm = JSON.stringify($("#myform").serializeJSON());
     console.log(MyForm);
      $.ajax(
      {
      url : "/adduser",
      type: "POST",
      data : MyForm,
      });
      e.preventDefault(); //STOP default action

     });
     });
</script> -->
<script>
// var formData = JSON.stringify($("sending").serializeArray());
// $.ajax({
//   type: "POST",
//   url: "serverUrl",
//   data: formData,
//   success: function(){},
//   dataType: "json",
//   contentType : "application/json"
// });
// $.post('adduser', data, function(response) {
//   // Do something with the request
// // }, 'json');
//
// $(document).ready(function(){
// $("button").click(function(){
      //  $.post("/adduser",
      //  {
      //    "email": document.getElementsByName('email'),
      //    "password": document.getElementsByName('password')
      //  },"json");
 //   });
 //   console.log(document.getElementsByName('email'));
 //
 // });
// $(function {
//   var customer=document.forms['sending'];
//   $.ajax({
//       type: "POST",
//       data :JSON.stringify(customer),
//       url: "api/Customer",
//       contentType: "application/json"
//   });
// });
//$.postJSON = function(url, data, func) { $.post(url+(url.indexOf("?") == -1 ? "?" : "&")+"callback=?", data, func, "json"); }
</script>
  </body>
</html>
